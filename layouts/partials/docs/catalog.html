<aside class="docs-catalog col-lg-2 collapse catalog-collapse">
  <div class="container px-0 px-lg-1">
    <div class="row card component">
      <div class="card-body">
        {{ template "walk-catalog" (dict "section" .FirstSection "page" .) }}
      </div>
    </div>
  </div>
</aside>

{{- define "walk-catalog" -}}
{{- $section := .section -}}
{{- $page := .page -}}
<ul class="list-unstyled mb-2">
    {{- range $section.Pages -}}
        {{- if .IsSection -}}
        {{- $sectionId := replace .Name " " "" | title | printf "catalog%s" -}}
        {{- $active := false -}}
        {{- if hasPrefix $page.Permalink .Permalink -}}
          {{- $active = true -}}
        {{- end -}}
        <li class="mb-2">
          <a class="btn-toggle collapsed d-flex align-items-center bg-accent text-white px-2 py-1" role="button" data-bs-toggle="collapse" data-bs-target="#{{ $sectionId }}" aria-expanded="{{ if $active }}true{{ else }}false{{ end }}" aria-controls="{{ $sectionId }}">
            {{ .Name }}
            <i class="btn-toggle-icon fas fa-arrow-left ms-auto" data-fa-transform="rotate-180"></i>
          </a>
          <div class="mt-2 collapse{{ if $active }} show{{ end }}" id="{{ $sectionId }}">
            <ul class="btn-toggle-nav list-unstyled fw-normal ms-3">
              {{ template "walk-catalog" (dict "section" . "page" $page) }}
            </ul>
          </div>
        </li>
        {{- else -}}
        <li class="mb-2{{ if eq .Permalink $page.Permalink }} text-accent{{ end }}">
          <a href="{{ .Permalink }}">{{ .Title }}</a>
        </li>
        {{- end -}}
    {{- end -}}
</ul>
{{- end -}}
