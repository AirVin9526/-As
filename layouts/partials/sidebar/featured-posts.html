{{- $count := default .Params.featuredPostCount .Site.Params.featuredPostCount }}
{{- if and $count (default false .Site.Params.sidebar.featuredPosts) }}
  {{- $featuredPosts := first $count (where (where site.RegularPages "Type" "in" site.Params.mainSections) ".Params.featured" "eq" true) }}
  {{- with $featuredPosts }}
  <section class="featured-posts row card component">
    <div class="card-header">
      <h2 class="card-title my-2 fs-4 text-surface">{{ i18n "featured_posts" }}</h2>
    </div>
    <div class="card-body">
      <ul class="post-list list-unstyled ms-1">
      {{- range . }}
        <li class="mb-2">
          <a href="{{ .Permalink }}">{{ partial "helpers/title" . }}</a>
        </li>
      {{- end }}
      </ul>
    </div>
  </section>
  {{- end }}
{{- end }}
